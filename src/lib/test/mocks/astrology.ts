import { NatalChart, TransitChart, CompositeChart } from '@/lib/astrology/types';

/**
 * Mock natal chart data for testing
 */
export const mockNatalChart: NatalChart = {
  calculation_type: 'natal',
  points: [
    {
      name: 'SUN',
      sign: 'Leo',
      sign_glyph: '♌',
      degree: 15,
      minute: 30,
      full_degree: 135.5,
      house: 5,
      retrograde: false,
    },
    {
      name: 'MOON',
      sign: 'Cancer',
      sign_glyph: '♋',
      degree: 10,
      minute: 15,
      full_degree: 100.25,
      house: 4,
      retrograde: false,
    },
    {
      name: 'MERCURY',
      sign: 'Leo',
      sign_glyph: '♌',
      degree: 5,
      minute: 45,
      full_degree: 125.75,
      house: 5,
      retrograde: false,
    },
    {
      name: 'VENUS',
      sign: 'Cancer',
      sign_glyph: '♋',
      degree: 20,
      minute: 0,
      full_degree: 110.0,
      house: 4,
      retrograde: false,
    },
    {
      name: 'MARS',
      sign: 'Gemini',
      sign_glyph: '♊',
      degree: 25,
      minute: 10,
      full_degree: 85.17,
      house: 3,
      retrograde: false,
    },
    {
      name: 'JUPITER',
      sign: 'Taurus',
      sign_glyph: '♉',
      degree: 8,
      minute: 22,
      full_degree: 38.37,
      house: 2,
      retrograde: false,
    },
    {
      name: 'SATURN',
      sign: 'Aquarius',
      sign_glyph: '♒',
      degree: 12,
      minute: 48,
      full_degree: 312.8,
      house: 12,
      retrograde: true,
    },
    {
      name: 'URANUS',
      sign: 'Capricorn',
      sign_glyph: '♑',
      degree: 2,
      minute: 15,
      full_degree: 272.25,
      house: 10,
      retrograde: false,
    },
    {
      name: 'NEPTUNE',
      sign: 'Capricorn',
      sign_glyph: '♑',
      degree: 15,
      minute: 30,
      full_degree: 285.5,
      house: 10,
      retrograde: true,
    },
    {
      name: 'PLUTO',
      sign: 'Scorpio',
      sign_glyph: '♏',
      degree: 18,
      minute: 45,
      full_degree: 228.75,
      house: 8,
      retrograde: true,
    },
  ],
  houses: [
    { house_number: 1, sign: 'Aries', sign_glyph: '♈', start_degree_in_sign: 0, absolute_degree: 0 },
    { house_number: 2, sign: 'Taurus', sign_glyph: '♉', start_degree_in_sign: 0, absolute_degree: 30 },
    { house_number: 3, sign: 'Gemini', sign_glyph: '♊', start_degree_in_sign: 0, absolute_degree: 60 },
    { house_number: 4, sign: 'Cancer', sign_glyph: '♋', start_degree_in_sign: 0, absolute_degree: 90 },
    { house_number: 5, sign: 'Leo', sign_glyph: '♌', start_degree_in_sign: 0, absolute_degree: 120 },
    { house_number: 6, sign: 'Virgo', sign_glyph: '♍', start_degree_in_sign: 0, absolute_degree: 150 },
    { house_number: 7, sign: 'Libra', sign_glyph: '♎', start_degree_in_sign: 0, absolute_degree: 180 },
    { house_number: 8, sign: 'Scorpio', sign_glyph: '♏', start_degree_in_sign: 0, absolute_degree: 210 },
    { house_number: 9, sign: 'Sagittarius', sign_glyph: '♐', start_degree_in_sign: 0, absolute_degree: 240 },
    { house_number: 10, sign: 'Capricorn', sign_glyph: '♑', start_degree_in_sign: 0, absolute_degree: 270 },
    { house_number: 11, sign: 'Aquarius', sign_glyph: '♒', start_degree_in_sign: 0, absolute_degree: 300 },
    { house_number: 12, sign: 'Pisces', sign_glyph: '♓', start_degree_in_sign: 0, absolute_degree: 330 },
  ],
  ascendant: {
    sign: 'Aries',
    sign_glyph: '♈',
    full_degree: 0,
  },
  midheaven: {
    sign: 'Capricorn',
    sign_glyph: '♑',
    full_degree: 270,
  },
  time_unknown_applied: false,
  aspects: [
    {
      point1: 'SUN',
      point2: 'MERCURY',
      type: 'conjunction',
      angle: 0,
      orb: 9.75,
      applying: false,
      exactness: 0.65,
    },
    {
      point1: 'SUN',
      point2: 'SATURN',
      type: 'opposition',
      angle: 180,
      orb: 2.7,
      applying: true,
      exactness: 0.9,
    },
    {
      point1: 'MOON',
      point2: 'VENUS',
      type: 'conjunction',
      angle: 0,
      orb: 9.75,
      applying: true,
      exactness: 0.68,
    },
  ],
};

/**
 * Mock transit chart data for testing
 */
export const mockTransitChart: TransitChart = {
  calculation_type: 'transits',
  points: [
    {
      name: 'SUN',
      sign: 'Virgo',
      sign_glyph: '♍',
      degree: 5,
      minute: 30,
      full_degree: 155.5,
      retrograde: false,
    },
    {
      name: 'MOON',
      sign: 'Libra',
      sign_glyph: '♎',
      degree: 10,
      minute: 15,
      full_degree: 190.25,
      retrograde: false,
    },
    {
      name: 'MERCURY',
      sign: 'Virgo',
      sign_glyph: '♍',
      degree: 20,
      minute: 45,
      full_degree: 170.75,
      retrograde: true,
    },
    {
      name: 'VENUS',
      sign: 'Leo',
      sign_glyph: '♌',
      degree: 25,
      minute: 0,
      full_degree: 145.0,
      retrograde: false,
    },
    {
      name: 'MARS',
      sign: 'Aries',
      sign_glyph: '♈',
      degree: 15,
      minute: 10,
      full_degree: 15.17,
      retrograde: false,
    },
    {
      name: 'JUPITER',
      sign: 'Taurus',
      sign_glyph: '♉',
      degree: 18,
      minute: 22,
      full_degree: 48.37,
      retrograde: false,
    },
    {
      name: 'SATURN',
      sign: 'Pisces',
      sign_glyph: '♓',
      degree: 2,
      minute: 48,
      full_degree: 332.8,
      retrograde: true,
    },
  ],
  date: new Date().toISOString(),
  aspects: [
    {
      point1: 'SUN',
      point2: 'Transit JUPITER',
      type: 'trine',
      angle: 120,
      orb: 2.87,
      applying: false,
      exactness: 0.89,
    },
    {
      point1: 'SATURN',
      point2: 'Transit SATURN',
      type: 'conjunction',
      angle: 0,
      orb: 20.0,
      applying: true,
      exactness: 0.45,
    },
  ],
};

/**
 * Mock composite chart data for testing
 */
export const mockCompositeChart: CompositeChart = {
  calculation_type: 'composite',
  points: [
    {
      name: 'SUN',
      sign: 'Virgo',
      sign_glyph: '♍',
      degree: 10,
      minute: 30,
      full_degree: 160.5,
      house: 5,
      retrograde: false,
    },
    {
      name: 'MOON',
      sign: 'Sagittarius',
      sign_glyph: '♐',
      degree: 5,
      minute: 15,
      full_degree: 245.25,
      house: 8,
      retrograde: false,
    },
    {
      name: 'MERCURY',
      sign: 'Virgo',
      sign_glyph: '♍',
      degree: 12,
      minute: 45,
      full_degree: 162.75,
      house: 5,
      retrograde: false,
    },
    {
      name: 'VENUS',
      sign: 'Libra',
      sign_glyph: '♎',
      degree: 7,
      minute: 0,
      full_degree: 187.0,
      house: 6,
      retrograde: false,
    },
  ],
  houses: [
    { house_number: 1, sign: 'Taurus', sign_glyph: '♉', start_degree_in_sign: 0, absolute_degree: 30 },
    { house_number: 2, sign: 'Gemini', sign_glyph: '♊', start_degree_in_sign: 0, absolute_degree: 60 },
    { house_number: 3, sign: 'Cancer', sign_glyph: '♋', start_degree_in_sign: 0, absolute_degree: 90 },
    { house_number: 4, sign: 'Leo', sign_glyph: '♌', start_degree_in_sign: 0, absolute_degree: 120 },
    { house_number: 5, sign: 'Virgo', sign_glyph: '♍', start_degree_in_sign: 0, absolute_degree: 150 },
    { house_number: 6, sign: 'Libra', sign_glyph: '♎', start_degree_in_sign: 0, absolute_degree: 180 },
    { house_number: 7, sign: 'Scorpio', sign_glyph: '♏', start_degree_in_sign: 0, absolute_degree: 210 },
    { house_number: 8, sign: 'Sagittarius', sign_glyph: '♐', start_degree_in_sign: 0, absolute_degree: 240 },
    { house_number: 9, sign: 'Capricorn', sign_glyph: '♑', start_degree_in_sign: 0, absolute_degree: 270 },
    { house_number: 10, sign: 'Aquarius', sign_glyph: '♒', start_degree_in_sign: 0, absolute_degree: 300 },
    { house_number: 11, sign: 'Pisces', sign_glyph: '♓', start_degree_in_sign: 0, absolute_degree: 330 },
    { house_number: 12, sign: 'Aries', sign_glyph: '♈', start_degree_in_sign: 0, absolute_degree: 0 },
  ],
  ascendant: {
    sign: 'Taurus',
    sign_glyph: '♉',
    full_degree: 30,
  },
  midheaven: {
    sign: 'Aquarius',
    sign_glyph: '♒',
    full_degree: 300,
  },
  aspects: [
    {
      point1: 'SUN',
      point2: 'MERCURY',
      type: 'conjunction',
      angle: 0,
      orb: 2.25,
      applying: false,
      exactness: 0.92,
    },
    {
      point1: 'SUN',
      point2: 'VENUS',
      type: 'square',
      angle: 90,
      orb: 3.5,
      applying: true,
      exactness: 0.85,
    },
  ],
};

/**
 * Mock astrology calculation functions
 */
export const mockAstrologyFunctions = {
  calculateNatalChart: jest.fn().mockResolvedValue(mockNatalChart),
  calculateTransits: jest.fn().mockResolvedValue(mockTransitChart),
  calculateCompositeChart: jest.fn().mockResolvedValue(mockCompositeChart),
};

// Mock the astrology module
jest.mock('@/lib/astrology/ephemeris', () => ({
  ...jest.requireActual('@/lib/astrology/ephemeris'),
  calculateNatalChart: jest.fn().mockImplementation(() => Promise.resolve(mockNatalChart)),
  calculateTransits: jest.fn().mockImplementation(() => Promise.resolve(mockTransitChart)),
  calculateCompositeChart: jest.fn().mockImplementation(() => Promise.resolve(mockCompositeChart)),
}));